Я, студентка КубГУ Овчарик Дарья Сергеевна, проходила практику в ООО «DigitalWand» в период с 13.07.2021 г. по 26.07.2021 г. На практике моей задачей была разработка новостного портала с публикациями событий, которые произошли в мире, с возможностью регистрации и авторизации пользователей. Все публикации поделены на рубрики (категории). Новость (публикация, статья) состоит из названия, изображения, даты публикации, короткого комментария, рубрики и полного описания. На главной странице и на страницах рубрик отображаются только первые пять полей новости, а при переходе по ссылке на публикацию – еще и полное ее описание. Тематически сайт разделен на следующие разделы:
-	главная страница: содержит информацию о сайте и последние статьи, есть страничная пагинация;
-	рубрики: каждая рубрика содержит новости только своей категории;
-	регистрация: форма с регистрацией пользователя;
-	авторизация: форма входа для пользователей, у которых уже есть учетная запись.

Для решения поставленной задачи мной был выбран PHP-фреймворк Yii2, реализующий MVC – схему разделения данных приложения. Фреймворк имеет высокую производительность относительно других фреймворков, написанных на PHP, поддерживает Bootstrap – набор инструментов для создания сайтов.  Платформой для создания локального сайта выступил OpenServer, включающий в себя СУБД MySQL и приложение PHPMyAdmin для администрирования базы данных. Средой разработки выступила 
IDE PhpStorm.

Структура базовой сборки фреймворка Yii2 имеет вид:
-	assets/ – содержит подключения ресурсов css и js;
-	commands/ – включает в себя консольные команды;
-	config/ – директория с файлами конфигурации;
-	controllers/ – папка для контроллеров;
-	models/ – содержит модели;
-	runtime/ – хранит файлы, возникшие во время работы сайта;
-	tests/ – включает в себя тесты для приложений;
-	vendor/ – содержит ядро Yii и библиотеки;
-	views/layouts/ – хранит шаблоны;
-	views/site/ – содержит файлы страниц сайта;
-	web/ – папка со стилями, скриптами, изображениями и др.


Для разработки новостного портала необходимо иметь базу новостей, которые должны отображаться на сайте. В БД под названием «yii2_mynews» я создала 3 таблицы:
-	category – категории публикаций, например, политика, экономика, спорт и т.д.;
-	post – публикация (новость);
-	user – таблица данных пользователей.

Чтобы подключить созданную базу данных к сайту, необходимо прописать путь к ней в конфигурационном файле config/web.php:

    'dsn' => 'mysql:host=localhost;dbname=yii2_mynews'

После создания базы я изучила архитектуру Model-View-Controller.

Контроллеры являются компонентом схемы MVC. Они содержат в себе перечень действий, которые отвечают за обработку получаемых запросов и генерирование ответов на них. Приняв запрос на обработку, контроллеры анализируют входные данные, передают их в модели, затем в представления, где и должен отобразиться ответ на запрос.
Для новостного сайта я написала контроллер PostController. Одноименный класс содержит методы, которые обрабатывают определенные адреса сайта, соответствующие определенным видам (представлениям). В контроллере прописаны 10 методов. Первый отвечает за контент главной страницы сайта, второй – за отображение каждой статьи на отдельной странице, следующие пять – за отображение статей, соответствующих выбранной пользователем категории (политика, экономика, наука, спорт, образование), восьмой – за страницу с регистрацией, девятый – за страницу с авторизацией, десятый позволяет авторизованному пользователю выйти из системы.

Еще один компонент MVC – это модель. Она необходима для извлечения и манипуляций данными приложения. Модель реагирует на запросы, поступающие из контроллера.
При разработке сайта мной были созданы следующие модели:
-	User (пользователь);
-	Signup (регистрация);
-	Login (авторизация);
-	Category (рубрика);
-	Post (публикация).

Последний компонент MVC – это представление (вид). Представление ответственно за видимое пользователю отображение контента.
В директории views/layouts я создала файл news.php, который является шаблоном сайта. Контент в этом файле отображается на всех страницах новостного портала. Файл содержит в себе общие данные – название сайта, язык документа, шапку страницы (header). Шапка включает в себя ссылку на главную страницу, ссылки на формы с регистрацией и авторизацией, ссылки на категории новостей.

В директории views/post хранятся следующие представления:
-	index.php – главная страница новостного портала;
-	view.php – страница, на которой отображается отдельная выбранная публикация;
-	politic.php – статьи с категорией политика;
-	economy.php – новости с категорией экономика;
-	science.php – статьи в рубрике наука;
-	sport.php – публикации с категорией спорт;
-	education.php – новости в рубрике образование;
-	signup.php – страница с формой регистрации;
-	login.php – страница с формой авторизации.

Регистрация и авторизация осуществляются с помощью компонента yii\web\User, который управляет статусом аутентификации пользователя. Чтобы пользоваться этим компонентом, в модели User был реализован интерфейс yii\web\IdentityInterface.

Данные, получаемые от пользователей, необходимо проверять. В фреймворке для валидации данных есть метод yii\base\Model::validate(). Чтобы им воспользоваться, я прописала свои правила проверки атрибутов.
При регистрации пользователь обязан указать адрес электронной почты и пароль. Я прописала в правилах, что эти поля обязательны для заполнения. Поле почты проверяется на соответствие формату и на уникальность в базе (т.е. другого пользователя с таким же почтовым ящиком быть не должно). Пароль должен содержать от 4 до 20 символов.
При авторизации поле почтового адреса проверяется на соответствие формату и на его наличие в базе данных. В случае нахождения этого адреса в базе проверяется соответствие введенного пароля и пароля, хранящегося в БД. Если ошибок нет, то пользователь вводится в сессию (т.е. он теперь авторизирован).
Для безопасного хранения пароля в базе данных я использовала 
хэш-функцию string sha1(). В ее основе лежит алгоритм US Secure Hash Algorithm 1. Функция принимает входную строку и создает 160-битное хэш-значение, отображаемое как шестнадцатеричное число длиной 40 цифр.


В конфигурационном файле config/web.php необходимо указывать шаблон страниц, название веб-приложения и его язык, а также маршрут к главной странице по умолчанию:
    'layout' => 'news',
    'name' => 'Мировые новости',
    'language' => 'ru',
    'defaultRoute' => 'post/index'


Все ссылки разработанного сайта являются ЧПУ (человекопонятными URL), т.е. такими URL, которые понятны пользователю. В файле config/web.php я прописала правила для ссылок:

'rules' => [
                'page/<page:\d+>' => 'post/index',
                '/' => 'post/index',
                'post/<id:\d+>' => 'post/view',
                'page/politic' => 'post/politic',
                'page/economy' => 'post/economy',
                'page/science' => 'post/science',
                'page/sport' => 'post/sport',
                'page/education' => 'post/education',
            ]


Новостной портал имеет понятный, адаптивный и красивый интерфейс. В папке web/ хранятся стили, шрифты и скрипты сайта. Для создания компонентов веб-интерфейса я также использовала средства фреймворка Bootstrap.

В результате прохождения практики поставленная задача была выполнена – разработан новостной портал с возможностью регистрации и авторизации пользователей. Был изучен PHP-фреймворк Yii2, получены навыки работы с OpenServer и СУБД MySQL, рассмотрен шаблон проектирования MVC. По завершении работы сайт был размещен на хостинге «Timeweb» и на веб-сервисе «GitHub».
